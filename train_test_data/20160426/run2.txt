/usr/bin/python2.7 /home/jdwang/PycharmProjects/digitRecognition/cnn/cnn_train.py
Using Theano backend.
____________________________________________________________________________________________________
Layer (type)                     Output Shape          Param #     Connected to
====================================================================================================
zeropadding2d_1 (ZeroPadding2D)  (None, 1, 17, 17)     0           zeropadding2d_input_1[0][0]
____________________________________________________________________________________________________
convolution2d_1 (Convolution2D)  (None, 32, 15, 15)    320         zeropadding2d_1[0][0]
____________________________________________________________________________________________________
activation_1 (Activation)        (None, 32, 15, 15)    0           convolution2d_1[0][0]
____________________________________________________________________________________________________
maxpooling2d_1 (MaxPooling2D)    (None, 32, 7, 7)      0           activation_1[0][0]
____________________________________________________________________________________________________
zeropadding2d_2 (ZeroPadding2D)  (None, 32, 9, 9)      0           maxpooling2d_1[0][0]
____________________________________________________________________________________________________
convolution2d_2 (Convolution2D)  (None, 64, 7, 7)      18496       zeropadding2d_2[0][0]
____________________________________________________________________________________________________
activation_2 (Activation)        (None, 64, 7, 7)      0           convolution2d_2[0][0]
____________________________________________________________________________________________________
maxpooling2d_2 (MaxPooling2D)    (None, 64, 3, 3)      0           activation_2[0][0]
____________________________________________________________________________________________________
convolution2d_3 (Convolution2D)  (None, 128, 1, 1)     73856       maxpooling2d_2[0][0]
____________________________________________________________________________________________________
activation_3 (Activation)        (None, 128, 1, 1)     0           convolution2d_3[0][0]
____________________________________________________________________________________________________
flatten_1 (Flatten)              (None, 128)           0           activation_3[0][0]
____________________________________________________________________________________________________
dense_1 (Dense)                  (None, 100)           12900       flatten_1[0][0]
____________________________________________________________________________________________________
activation_4 (Activation)        (None, 100)           0           dense_1[0][0]
____________________________________________________________________________________________________
dropout_1 (Dropout)              (None, 100)           0           activation_4[0][0]
____________________________________________________________________________________________________
dense_2 (Dense)                  (None, 50)            5050        dropout_1[0][0]
____________________________________________________________________________________________________
activation_5 (Activation)        (None, 50)            0           dense_2[0][0]
____________________________________________________________________________________________________
dropout_2 (Dropout)              (None, 50)            0           activation_5[0][0]
____________________________________________________________________________________________________
dense_3 (Dense)                  (None, 34)            1734        dropout_2[0][0]
____________________________________________________________________________________________________
activation_6 (Activation)        (None, 34)            0           dense_3[0][0]
====================================================================================================
Total params: 112356
____________________________________________________________________________________________________
None
Epoch 1/40
3400/3400 [==============================] - 16s - loss: 3.5138 - acc: 0.0471
Epoch 2/40
3400/3400 [==============================] - 16s - loss: 3.2986 - acc: 0.1032
Epoch 3/40
3400/3400 [==============================] - 16s - loss: 2.8664 - acc: 0.1918
Epoch 4/40
3400/3400 [==============================] - 15s - loss: 2.2761 - acc: 0.3112
Epoch 5/40
3400/3400 [==============================] - 16s - loss: 1.7768 - acc: 0.4368
Epoch 6/40
3400/3400 [==============================] - 16s - loss: 1.4280 - acc: 0.5350
Epoch 7/40
3400/3400 [==============================] - 16s - loss: 1.2110 - acc: 0.6053
Epoch 8/40
3400/3400 [==============================] - 16s - loss: 1.0111 - acc: 0.6688
Epoch 9/40
3400/3400 [==============================] - 16s - loss: 0.8856 - acc: 0.7132
Epoch 10/40
3400/3400 [==============================] - 16s - loss: 0.7956 - acc: 0.7394
Epoch 11/40
3400/3400 [==============================] - 17s - loss: 0.6996 - acc: 0.7806
Epoch 12/40
3400/3400 [==============================] - 17s - loss: 0.6603 - acc: 0.7991
Epoch 13/40
3400/3400 [==============================] - 17s - loss: 0.6254 - acc: 0.7932
Epoch 14/40
3400/3400 [==============================] - 17s - loss: 0.5862 - acc: 0.8168
Epoch 15/40
3400/3400 [==============================] - 16s - loss: 0.5536 - acc: 0.8329
Epoch 16/40
3400/3400 [==============================] - 16s - loss: 0.5329 - acc: 0.8332
Epoch 17/40
3400/3400 [==============================] - 16s - loss: 0.4786 - acc: 0.8524
Epoch 18/40
3400/3400 [==============================] - 16s - loss: 0.4591 - acc: 0.8600
Epoch 19/40
3400/3400 [==============================] - 18s - loss: 0.4524 - acc: 0.8659
Epoch 20/40
3400/3400 [==============================] - 17s - loss: 0.4163 - acc: 0.8726
Epoch 21/40
3400/3400 [==============================] - 17s - loss: 0.3868 - acc: 0.8850
Epoch 22/40
3400/3400 [==============================] - 17s - loss: 0.4121 - acc: 0.8812
Epoch 23/40
3400/3400 [==============================] - 16s - loss: 0.3940 - acc: 0.8806
Epoch 24/40
3400/3400 [==============================] - 16s - loss: 0.4208 - acc: 0.8712
Epoch 25/40
3400/3400 [==============================] - 16s - loss: 0.3721 - acc: 0.8903
Epoch 26/40
3400/3400 [==============================] - 16s - loss: 0.3505 - acc: 0.8956
Epoch 27/40
3400/3400 [==============================] - 16s - loss: 0.3378 - acc: 0.9024
Epoch 28/40
3400/3400 [==============================] - 16s - loss: 0.3154 - acc: 0.9065
Epoch 29/40
3400/3400 [==============================] - 16s - loss: 0.3014 - acc: 0.9118
Epoch 30/40
3400/3400 [==============================] - 16s - loss: 0.3416 - acc: 0.9015
Epoch 31/40
3400/3400 [==============================] - 17s - loss: 0.3571 - acc: 0.8882
Epoch 32/40
3400/3400 [==============================] - 18s - loss: 0.3259 - acc: 0.9024
Epoch 33/40
3400/3400 [==============================] - 21s - loss: 0.3312 - acc: 0.8982
Epoch 34/40
3400/3400 [==============================] - 20s - loss: 0.2884 - acc: 0.9159
Epoch 35/40
3400/3400 [==============================] - 16s - loss: 0.3003 - acc: 0.9135
Epoch 36/40
3400/3400 [==============================] - 16s - loss: 0.2870 - acc: 0.9168
Epoch 37/40
3400/3400 [==============================] - 16s - loss: 0.2903 - acc: 0.9147
Epoch 38/40
3400/3400 [==============================] - 17s - loss: 0.2739 - acc: 0.9197
Epoch 39/40
3400/3400 [==============================] - 16s - loss: 0.3141 - acc: 0.9050
Epoch 40/40
3400/3400 [==============================] - 16s - loss: 0.2786 - acc: 0.9238
train time : 686.758460
39104/39104 [==============================] - 70s
[ True  True  True ...,  True  True  True]
2016-07-11 08:14:31,805 : DEBUG : 正确的个数:38424
正确的个数:38424
准确率为:0.982610
2016-07-11 08:14:32,003 : DEBUG : 准确率为:0.982610
2016-07-11 08:14:32,026 : DEBUG : F1为：[ 0.98156682  0.98522007  0.9799061   0.99956408  0.99916318  0.98589458
  0.99867769  0.98957169  0.97723824  0.99900662  0.98305085  0.69387755
  0.98770788  0.86002886  0.99145299  1.          0.99559471  1.          0.8
  0.9792      0.9991357   0.97142857  0.96888889  0.97222222  0.99413834
  0.88018433  0.995671    0.62311558  0.8583691   0.97533402  0.99646643
  0.99130435  0.99799062  0.76923077]
F1为：[ 0.98156682  0.98522007  0.9799061   0.99956408  0.99916318  0.98589458
  0.99867769  0.98957169  0.97723824  0.99900662  0.98305085  0.69387755
  0.98770788  0.86002886  0.99145299  1.          0.99559471  1.          0.8
  0.9792      0.9991357   0.97142857  0.96888889  0.97222222  0.99413834
  0.88018433  0.995671    0.62311558  0.8583691   0.97533402  0.99646643
  0.99130435  0.99799062  0.76923077]
precision:[ 0.9984375   0.99410029  0.99961686  0.99978199  0.9996651   1.
  0.99966909  0.98846726  0.99887197  1.          0.98067633  0.53735632
  0.99129173  0.77002584  0.98305085  1.          1.          1.
  0.67058824  0.96835443  1.          0.94444444  0.99090909  0.94594595
  1.          0.7892562   0.99137931  0.45588235  0.76335878  0.97835052
  1.          0.99563319  0.9959893   0.62745098]
recall_score:[ 0.9652568   0.9764971   0.96095764  0.99934626  0.99866176  0.97218155
  0.99768824  0.9906786   0.95652174  0.99801522  0.98543689  0.97905759
  0.98414986  0.97385621  1.          1.          0.99122807  1.
  0.99130435  0.99029126  0.99827288  1.          0.94782609  1.
  0.98834499  0.99479167  1.          0.98412698  0.98039216  0.97233607
  0.99295775  0.98701299  1.          0.99378882]
Epoch 1/40
3400/3400 [==============================] - 16s - loss: 0.3146 - acc: 0.9203
Epoch 2/40
3400/3400 [==============================] - 17s - loss: 0.3219 - acc: 0.9168
Epoch 3/40
3400/3400 [==============================] - 16s - loss: 0.3565 - acc: 0.9012
Epoch 4/40
3400/3400 [==============================] - 16s - loss: 0.3110 - acc: 0.9176
Epoch 5/40
3400/3400 [==============================] - 16s - loss: 0.3015 - acc: 0.9194
Epoch 6/40
3400/3400 [==============================] - 16s - loss: 0.2723 - acc: 0.9303
Epoch 7/40
3400/3400 [==============================] - 16s - loss: 0.2754 - acc: 0.9262
Epoch 8/40
3400/3400 [==============================] - 16s - loss: 0.2616 - acc: 0.9297
Epoch 9/40
3400/3400 [==============================] - 16s - loss: 0.2671 - acc: 0.9274
Epoch 10/40
3400/3400 [==============================] - 16s - loss: 0.2495 - acc: 0.9262
Epoch 11/40
3400/3400 [==============================] - 16s - loss: 0.2613 - acc: 0.9268
Epoch 12/40
3400/3400 [==============================] - 16s - loss: 0.2510 - acc: 0.9321
Epoch 13/40
3400/3400 [==============================] - 16s - loss: 0.2527 - acc: 0.9315
Epoch 14/40
3400/3400 [==============================] - 16s - loss: 0.2704 - acc: 0.9288
Epoch 15/40
3400/3400 [==============================] - 16s - loss: 0.2506 - acc: 0.9324
Epoch 16/40
3400/3400 [==============================] - 16s - loss: 0.2427 - acc: 0.9376
Epoch 17/40
3400/3400 [==============================] - 16s - loss: 0.2321 - acc: 0.9391
Epoch 18/40
3400/3400 [==============================] - 16s - loss: 0.2231 - acc: 0.9353
Epoch 19/40
3400/3400 [==============================] - 17s - loss: 0.2128 - acc: 0.9359
Epoch 20/40
3400/3400 [==============================] - 16s - loss: 0.2144 - acc: 0.9421
Epoch 21/40
3400/3400 [==============================] - 16s - loss: 0.2084 - acc: 0.9450
Epoch 22/40
3400/3400 [==============================] - 16s - loss: 0.2178 - acc: 0.9418
Epoch 23/40
3400/3400 [==============================] - 16s - loss: 0.2170 - acc: 0.9388
Epoch 24/40
3400/3400 [==============================] - 16s - loss: 0.2216 - acc: 0.9356
Epoch 25/40
3400/3400 [==============================] - 16s - loss: 0.2008 - acc: 0.9441
Epoch 26/40
3400/3400 [==============================] - 16s - loss: 0.2229 - acc: 0.9388
Epoch 27/40
3400/3400 [==============================] - 16s - loss: 0.2125 - acc: 0.9385
Epoch 28/40
3400/3400 [==============================] - 16s - loss: 0.2188 - acc: 0.9426
Epoch 29/40
3400/3400 [==============================] - 16s - loss: 0.2054 - acc: 0.9376
Epoch 30/40
3400/3400 [==============================] - 16s - loss: 0.2115 - acc: 0.9388
Epoch 31/40
3400/3400 [==============================] - 16s - loss: 0.1879 - acc: 0.9447
Epoch 32/40
3400/3400 [==============================] - 16s - loss: 0.1834 - acc: 0.9476
Epoch 33/40
3400/3400 [==============================] - 16s - loss: 0.1957 - acc: 0.9435
Epoch 34/40
3400/3400 [==============================] - 16s - loss: 0.1870 - acc: 0.9447
Epoch 35/40
3400/3400 [==============================] - 16s - loss: 0.1992 - acc: 0.9429
Epoch 36/40
3400/3400 [==============================] - 16s - loss: 0.1681 - acc: 0.9506
Epoch 37/40
3400/3400 [==============================] - 16s - loss: 0.1722 - acc: 0.9494
Epoch 38/40
3400/3400 [==============================] - 16s - loss: 0.1969 - acc: 0.9421
Epoch 39/40
3400/3400 [==============================] - 16s - loss: 0.1913 - acc: 0.9468
Epoch 40/40
3400/3400 [==============================] - 16s - loss: 0.1785 - acc: 0.9474
train time : 663.777773
39104/39104 [==============================] - 71s
[ True  True  True ...,  True  True  True]
2016-07-11 08:26:53,769 : DEBUG : 正确的个数:38463
正确的个数:38463
2016-07-11 08:26:53,982 : DEBUG : 准确率为:0.983608
准确率为:0.983608
2016-07-11 08:26:54,010 : DEBUG : F1为：[ 0.98376997  0.98660642  0.97953052  0.99956408  0.99933066  0.98478099
  0.99851166  0.98879343  0.97936159  0.99900662  0.98058252  0.71374046
  0.98695652  0.86580087  1.          1.          1.          1.
  0.81428571  0.97913323  0.9991357   0.95505618  0.98245614  0.97652582
  0.99295775  0.91428571  0.99137931  0.60696517  0.91162791  0.97636177
  0.99292453  0.99349241  0.99799062  0.76923077]
F1为：[ 0.98376997  0.98660642  0.97953052  0.99956408  0.99933066  0.98478099
  0.99851166  0.98879343  0.97936159  0.99900662  0.98058252  0.71374046
  0.98695652  0.86580087  1.          1.          1.          1.
  0.81428571  0.97913323  0.9991357   0.95505618  0.98245614  0.97652582
  0.99295775  0.91428571  0.99137931  0.60696517  0.91162791  0.97636177
  0.99292453  0.99349241  0.99799062  0.76923077]
precision:[ 0.99896185  0.98900032  0.99923372  0.99978199  0.99966522  0.99887048
  1.          0.99064371  0.99831697  1.          0.98058252  0.56156156
  0.99271137  0.7751938   1.          1.          1.          1.
  0.69090909  0.97133758  1.          0.91397849  0.99115044  0.96296296
  1.          0.84210526  0.98290598  0.44202899  0.86725664  0.97938144
  0.99763033  0.99565217  0.9959893   0.62745098]
recall_score:[ 0.96903323  0.98422408  0.96058932  0.99934626  0.99899632  0.97108346
  0.99702774  0.98695004  0.96111261  0.99801522  0.98058252  0.97905759
  0.98126801  0.98039216  1.          1.          1.          1.
  0.99130435  0.98705502  0.99827288  1.          0.97391304  0.99047619
  0.98601399  1.          1.          0.96825397  0.96078431  0.97336066
  0.98826291  0.99134199  1.          0.99378882]
Epoch 1/40
3400/3400 [==============================] - 18s - loss: 0.2134 - acc: 0.9462
Epoch 2/40
3400/3400 [==============================] - 17s - loss: 0.1952 - acc: 0.9529
Epoch 3/40
3400/3400 [==============================] - 16s - loss: 0.2040 - acc: 0.9441
Epoch 4/40
3400/3400 [==============================] - 16s - loss: 0.1938 - acc: 0.9471
Epoch 5/40
3400/3400 [==============================] - 16s - loss: 0.2054 - acc: 0.9476
Epoch 6/40
3400/3400 [==============================] - 16s - loss: 0.1936 - acc: 0.9485
Epoch 7/40
3400/3400 [==============================] - 18s - loss: 0.1896 - acc: 0.9479
Epoch 8/40
3400/3400 [==============================] - 20s - loss: 0.1928 - acc: 0.9462
Epoch 9/40
3400/3400 [==============================] - 17s - loss: 0.1889 - acc: 0.9447
Epoch 10/40
3400/3400 [==============================] - 19s - loss: 0.1843 - acc: 0.9485
Epoch 11/40
3400/3400 [==============================] - 17s - loss: 0.1822 - acc: 0.9497
Epoch 12/40
3400/3400 [==============================] - 17s - loss: 0.1796 - acc: 0.9450
Epoch 13/40
3400/3400 [==============================] - 17s - loss: 0.1747 - acc: 0.9512
Epoch 14/40
3400/3400 [==============================] - 20s - loss: 0.1694 - acc: 0.9535
Epoch 15/40
3400/3400 [==============================] - 22s - loss: 0.1686 - acc: 0.9553
Epoch 16/40
3400/3400 [==============================] - 22s - loss: 0.1752 - acc: 0.9550
Epoch 17/40
3400/3400 [==============================] - 22s - loss: 0.1723 - acc: 0.9497
Epoch 18/40
3400/3400 [==============================] - 21s - loss: 0.1585 - acc: 0.9553
Epoch 19/40
3400/3400 [==============================] - 21s - loss: 0.2015 - acc: 0.9450
Epoch 20/40
3400/3400 [==============================] - 22s - loss: 0.1716 - acc: 0.9485
Epoch 21/40
3400/3400 [==============================] - 23s - loss: 0.1821 - acc: 0.9497
Epoch 22/40
3400/3400 [==============================] - 21s - loss: 0.1673 - acc: 0.9547
Epoch 23/40
3400/3400 [==============================] - 22s - loss: 0.1798 - acc: 0.9456
Epoch 24/40
3400/3400 [==============================] - 24s - loss: 0.1623 - acc: 0.9524
Epoch 25/40
3400/3400 [==============================] - 22s - loss: 0.1600 - acc: 0.9562
Epoch 26/40
3400/3400 [==============================] - 21s - loss: 0.1760 - acc: 0.9491
Epoch 27/40
3400/3400 [==============================] - 21s - loss: 0.1819 - acc: 0.9471
Epoch 28/40
3400/3400 [==============================] - 22s - loss: 0.1689 - acc: 0.9524
Epoch 29/40
3400/3400 [==============================] - 21s - loss: 0.1553 - acc: 0.9541
Epoch 30/40
3400/3400 [==============================] - 22s - loss: 0.1582 - acc: 0.9550
Epoch 31/40
3400/3400 [==============================] - 22s - loss: 0.1702 - acc: 0.9524
Epoch 32/40
3400/3400 [==============================] - 21s - loss: 0.1593 - acc: 0.9521
Epoch 33/40
3400/3400 [==============================] - 21s - loss: 0.1462 - acc: 0.9588
Epoch 34/40
3400/3400 [==============================] - 21s - loss: 0.1483 - acc: 0.9585
Epoch 35/40
3400/3400 [==============================] - 22s - loss: 0.1573 - acc: 0.9544
Epoch 36/40
3400/3400 [==============================] - 24s - loss: 0.1542 - acc: 0.9574
Epoch 37/40
3400/3400 [==============================] - 23s - loss: 0.1480 - acc: 0.9579
Epoch 38/40
3400/3400 [==============================] - 20s - loss: 0.1550 - acc: 0.9562
Epoch 39/40
3400/3400 [==============================] - 25s - loss: 0.1428 - acc: 0.9591
Epoch 40/40
3400/3400 [==============================] - 25s - loss: 0.1378 - acc: 0.9603
train time : 839.030296
39104/39107 [============================>.] - ETA: 0s[ True  True  True ...,  True  True  True]
2016-07-11 08:42:32,313 : DEBUG : 正确的个数:38457
正确的个数:38457
2016-07-11 08:42:32,506 : DEBUG : 准确率为:0.983379
准确率为:0.983379
F1为：[ 0.98324594  0.98819725  0.97779451  0.99912854  0.99933066  0.98570633
  0.99917396  0.98918717  0.97862953  0.99900662  0.97336562  0.71268657
  0.98351254  0.85921626  1.          1.          0.99559471  1.
  0.89411765  0.97622821  0.99913719  0.94972067  0.96860987  0.95890411
  0.99295775  0.9138756   0.99137931  0.62311558  0.8722467   0.97530864
  0.99411072  0.995671    0.99799062  0.75409836]
2016-07-11 08:42:32,524 : DEBUG : F1为：[ 0.98324594  0.98819725  0.97779451  0.99912854  0.99933066  0.98570633
  0.99917396  0.98918717  0.97862953  0.99900662  0.97336562  0.71268657
  0.98351254  0.85921626  1.          1.          0.99559471  1.
  0.89411765  0.97622821  0.99913719  0.94972067  0.96860987  0.95890411
  0.99295775  0.9138756   0.99137931  0.62311558  0.8722467   0.97530864
  0.99411072  0.995671    0.99799062  0.75409836]
precision:[ 0.99922017  0.99253004  0.99961524  0.99891091  0.99966522  1.
  0.99966942  0.98918717  0.99971831  1.          0.97101449  0.55523256
  0.978602    0.77284595  1.          1.          1.          1.
  0.81428571  0.95652174  0.99827586  0.90425532  1.          0.92920354
  1.          0.84513274  0.98290598  0.45588235  0.792       0.97933884
  0.99763593  0.995671    0.9959893   0.60526316]
recall_score:[ 0.96777442  0.98390212  0.95690608  0.99934626  0.99899632  0.97181552
  0.998679    0.98918717  0.9584121   0.99801522  0.97572816  0.99479167
  0.98847262  0.96732026  1.          1.          0.99122807  1.
  0.99130435  0.99676375  1.          1.          0.93913043  0.99056604
  0.98601399  0.99479167  1.          0.98412698  0.97058824  0.97131148
  0.99061033  0.995671    1.          1.        ]

Process finished with exit code 0
F1:0.98918717,0.8722467
precision:0.98918717,0.792
Recall:0.98918717,0.97058824

